<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=description content="things to do
oom - if application ooming hypervisor system ooming
not much to do excepet cloud provider hardware health https://grafana."><title>2025-12-01
</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://azhou35.github.io/my-digital-garden//icon.png><link href=https://azhou35.github.io/my-digital-garden/styles.591589daec716a7d5287f8d56c2c091e.min.css rel=stylesheet><link href=https://azhou35.github.io/my-digital-garden/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://azhou35.github.io/my-digital-garden/js/darkmode.111b0c7178f4cf301c69a167d6c795e4.min.js></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script><script src=https://unpkg.com/@floating-ui/core@0.7.3></script><script src=https://unpkg.com/@floating-ui/dom@0.5.4></script><script src=https://azhou35.github.io/my-digital-garden/js/popover.37b1455b8f0603154072b9467132c659.min.js></script><script src=https://azhou35.github.io/my-digital-garden/js/code-title.b35124ad8db0ba37162b886afb711cbc.min.js></script><script src=https://azhou35.github.io/my-digital-garden/js/clipboard.25155053855f45fdc48fd92540bcebc9.min.js></script><script>const BASE_URL="https://azhou35.github.io/my-digital-garden/",fetchData=Promise.all([fetch("https://azhou35.github.io/my-digital-garden/indices/linkIndex.160e3dae0ccc3e93f972ff9a8ab8e8f2.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://azhou35.github.io/my-digital-garden/indices/contentIndex.20674002f1e4267a795bceb51bea9460.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const n=new URL(BASE_URL),s=n.pathname,o=window.location.pathname,i=s==o;addCopyButtons(),addTitleToCodeBlocks();const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=i&&!1;drawGraph("https://azhou35.github.io/my-digital-garden",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2}),initPopover("https://azhou35.github.io/my-digital-garden",!0,!0)},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/azhou35.github.io\/my-digital-garden\/js\/router.9d4974281069e9ebb189f642ae1e3ca2.min.js"
    attachSPARouting(init, render)
  </script></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-XYFD95KB4J"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XYFD95KB4J")}</script><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script><script defer src=https://azhou35.github.io/my-digital-garden/js/search.cf33b507388f3dfd5513a2afcda7af41.min.js></script><div class=singlePage><header><h1 id=page-title><a href=https://azhou35.github.io/my-digital-garden/>ðŸª´ anniez</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg>
</label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>2025-12-01</h1><p class=meta>Last updated
Unknown</p><ul class=tags></ul><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><ol><li><a href=#daniel>daniel</a></li></ol></li></ol></nav></details></aside><p>things to do</p><p>oom -
if application ooming
hypervisor system ooming</p><ul><li>not much to do excepet cloud provider</li></ul><p>hardware health
<a href="https://grafana.sci.openai.org/d/eexoanvjmmwhsa/ev3-dash-chronosphere?orgId=1&amp;var-cluster=titanium&amp;from=now-7d&amp;refresh=1m&amp;var-namespace=codex&amp;var-exported_namespace=codex&amp;var-rapid_id=.%2A&amp;var-pod=tyranitar-run-rollout-worker-.%2A&amp;to=now&amp;theme=light&amp;timezone=America%2FLos_Angeles&amp;var-datasource=chronosphere&amp;var-interval=30s&amp;var-rank=.%2A&amp;var-pipereplica_group_regex=.%2A" rel=noopener>https://grafana.sci.openai.org/d/eexoanvjmmwhsa/ev3-dash-chronosphere?orgId=1&amp;var-cluste[â€¦]terval=30s&amp;var-rank=.%2A&amp;var-pipereplica_group_regex=.%2A</a></p><p>f16 - may require a repave</p><p>Simon -
we fully focused in decoms aorund azure clusters
find anyone who worked on caas
V100</p><p>search google
v100</p><p>carolina contracted v100 ids</p><p>concern is if theyre using productionuse case
replacement capacity</p><p>best case -
this is the sub id that is impacted - caas folks
<a href=https://www.notion.so/openai/Applied-Capacity-Planning-Group-Quota-CLI-19e8e50b62b080eaa499c98817418871 rel=noopener>https://www.notion.so/openai/Applied-Capacity-Planning-Group-Quota-CLI-19e8e50b62b080eaa499c98817418871</a>
<a href=https://command-center-web.reliability-1.internal.api.openai.org/capacity-manager/request rel=noopener>https://command-center-web.reliability-1.internal.api.openai.org/capacity-manager/request</a></p><p>massive cluster needs to move a lot of capacity
can ends up in 50 diff clusters
things are getting in diff 50 diff clusters
changes for improving
if its slow down model weights, slow to pull down engines, spread out across
a lot of
product side - they need capacity for serving products
they&rsquo;re getting alerts that theyre getting engines not being scheduled on time</p><p>take a subset of these clusters at this side
do we need not build it as large in general</p><p>gcp do you need to take out the entire thing at once
wheree we might get a physical domain information
but if we dont have thia in our node database
within c253 i wanna drain this domain
row of racks
job gets</p><p>available on provider side and pull it into our system</p><p>what is gogoles failure domain</p><p>the cluster
mahmoud -</p><ul><li>we started the cluster evac</li><li>9pm - hit the bottom - bc its a big cluser it puts a lot of stress<ul><li>10:20 pm - ppl spinning new experiments for chat</li></ul></li><li>stayed up until 2 until you could make their engines spin up and take priority
maintenance happened</li><li>took slightly longer</li><li>maintennce didnt finish correclty</li><li>problem was overlooked<ul><li>daniel mitigated by removed the controller that bans nodes</li></ul></li><li>moving back cluster things broke<ul><li>tensorapi broke</li><li>when we moved everywehre into the cluster</li><li>a lot of pressure going into one place</li></ul></li><li>egaged the tensor api - working until 10 - 11 pm</li><li>view to show all the unallocated capacity<ul><li>free - means didnt allocated</li><li>negative - you allocated capacity - but u promised</li></ul></li><li>over the weekend<ul><li>sujith recycled thru the nodes</li><li>tensor api broke again</li></ul></li><li>cycled thru more nodes - sora lost capacity</li><li>needed to fail over</li><li>can edit the quota<ul><li>aaas long as they have capacity here you can move them somewhere</li><li>only did this for sora - some ppl who were outside of c253 had to move to c253
tldr
c253</li></ul></li></ul><p>up to 5k A100es</p><p>37420 A100e
c253</p><p>in a very ideal scenario can failover</p><p>up to 55k
try not to allocated more than 10% in the same quota</p><p>need to wait</p><p>scheduling pov - island - set of nodes
pin to a particular island
partition these big clusters - based on these blocks
based into islands</p><p>ak c263 ge ibd -oyaml
what if we had many of these
roce block 1 2 3</p><a href=#daniel><h3 id=daniel><span class=hanchor arialabel=Anchor># </span>daniel</h3></a><p>when we experimented on the block - we found the drain very slow
daniel increased the parallelism
need some balance the sped and health
previously during the experiment
block by block</p><p>dont need to wait for block to go back
stagger it out by 20 minutes</p><ul><li>add more time at the beginning for gradual drain<ul><li>we&rsquo;re running into limits for our nodes</li><li>if you send the whole cluser</li></ul></li><li>what is the maximum number of nodes</li></ul><p>during the drain we didnt terminate the pod properly
networking is overloaded
it takes</p><ul><li>maintenance takes seeveral hours - but pod takes several hours</li><li>tries to terminate the pod</li></ul><p>#1) - gradual maintenance - 6 hour window - 2 hr drain block by block
#2) move their experiment to other clusters
do one block and wait 4 hrs</p><p>we can get info from the blocks
351 011 792 1106</p></article><hr><div class=page-end><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li>No backlinks found</li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://azhou35.github.io/my-digital-garden/js/graph.afdb02e537635f9a611b53a988e5645b.js></script></div></div><div id=contact_buttons><footer><p>Made by anniez using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, Â© 2026</p><ul><li><a href=https://azhou35.github.io/my-digital-garden/>Home</a></li><li><a href=https://twitter.com/azhou35>Twitter</a></li><li><a href=https://github.com/azhou35>Github</a></li></ul></footer></div></div></body></html>